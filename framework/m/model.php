<?phpinclude_once("Database.php");function text_get(){    return file_get_contents('data/text.txt');}function text_set($text){    file_put_contents('data/text.txt', $text);}function template($fileName, $vars = []){    //twig 2.12.6-DEV    try {        require_once '../vendor/autoload.php';        $loader = new \Twig\Loader\FilesystemLoader('v');        $twig = new \Twig\Environment($loader);        $content = $twig->render($fileName, $vars);        return $content;    } catch (Exception $e) {        die ('ERROR: ' . $e->getMessage());    }}function registration($login, $password){    $db = Database::getDB();    $result =  $db->registration($login, $password);    if($result)        set_cookies($login, $password);    return $result;}function authorisation($login, $password){    $db = Database::getDB();    $result =  $db->authorisation($login, $password);    if($result)        set_cookies($login, $password);    return $result;}function check_auth(){    $active_user = '';    if ($_COOKIE['active-user'] && $_COOKIE['active-user'] != '')        $active_user = $_COOKIE['active-user'];    //если есть активный юзер и у него есть логин и пароль    if ($active_user && $_COOKIE["$active_user-login"] && $_COOKIE["$active_user-password"]) {        $login = $_COOKIE["$active_user-login"];        $password = $_COOKIE["$active_user-password"];        if (!authorisation($login, $password)) {            exit_form_account();            return false;        }        return true;    }    return false;}function set_cookies($login, $password){    setcookie("$login-login", $login, time() + 3600 * 24 * 7, '/');    setcookie("$login-password", $password, time() + 3600 * 24 * 7, '/');    setcookie('active-user', $login, time() + 3600 * 24 * 7, '/');    $_COOKIE['active-user'] = $login;    $_COOKIE["$login-login"] = $login;    $_COOKIE["$login-password"] = $password;}function exit_form_account(){    $_COOKIE['active-user'] = '';    setcookie('active-user', '', time() + 1, '/');}function get_user_login(){    $db = Database::getDB();    return $db->get_user_id($_COOKIE['active-user']);}function set_user_history($page){    $page = str_replace('Название сайта::','',$page);    $user_id = get_user_login();    $db = Database::getDB();    //получим все данные о посещённых страницах    $history = $db->get_history($user_id);    //вместо самой старой записи добавим новую    if(count($history) == 5)        $db->clear_history($history[0]['id']);    $db->add_to_history($user_id, $page);    $history = $db->get_history($user_id);}function get_user_history(){    $user_id = get_user_login();    $db = Database::getDB();    $history = $db->get_history($user_id);    $result = [];    foreach ($history as $page){        $result[] = $page['page'];    }    return $result;}